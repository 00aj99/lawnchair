<!DOCTYPE html>
<html>
    <head><title>Lawnchair: Simple JSON Storage</title><head>
    <link href="/assets/css/app.css" type="text/css" rel="stylesheet" /> 
    <link href="/assets/css/grid.css" type="text/css" rel="stylesheet" /> 
    <link href="/assets/css/ir_black.css" type="text/css" rel="stylesheet" /> 
<body>
    <div class="container_12">
        <div class="grid_3">
            <h1><a href="/">Lawnchair</a></h1>
            <p>Simple JSON Storage</p>
            <img src="/assets/img/tiny-lawnchair.gif" alt="Lawnchair: Simple JSON Storage" />
        </div>
        <div class="grid_3">
            <h2>code</h2>
            <ul class="nav">
				<li><a href="/">home</a></li>
				<li><a href="/downloads">downloads</a></li>
				<li><a href="/tests">tests</a></li>
				<li><a href="/license">license</a></li>
            </ul>
            
            <h2>documentation</h2>
            <ul class="nav">
				<li><a href="/quickstart">quickstart</a></li>
				<li><a href="/initialization">init</a></li>
				<li><a href="/saving">saving</a></li>
				<li><a href="/finding">finding</a></li>
				<li><a href="/removing">removing</a></li>
				<li><a href="/iteration">iteration</a></li>
				<li><a href="/sugar">sugar</a></li>
				<li><a href="/adapters">adapters</a></li>
				<li><a href="/plugins">plugins</a></li>
            </ul> 
            
            <h2>community</h2>
            <ul class="nav">
                <li><a href="http://github.com/brianleroux/lawnchair">source on github</a></li>
            </ul> 
        </div>
        <div class="grid_6">
<h1>Adapters</h1>
<p>Adapters expose a consistent interface to a persistent storage implementation. A Lawnchair build enqueues adapters and mixes in the first one valid for the current environment. This pattern is common in mobile scenarios, for example, a Lawnchair build with the DOM and Gears adapters will gracefully degrade through all available Android persistence solutions.</p>
<div class="codehilite"><pre><span class="n">blackberry</span><span class="o">-</span><span class="n">persistent</span><span class="o">-</span><span class="n">store</span> <span class="o">...</span> <span class="n">great</span> <span class="k">for</span> <span class="n">phonegap</span>
<span class="n">dom</span> <span class="o">...........................</span> <span class="n">default</span> <span class="n">adapter</span>
<span class="n">gears</span><span class="o">-</span><span class="n">sqlite</span> <span class="o">..................</span> <span class="k">for</span> <span class="n">androids</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">.</span><span class="n">x</span>
<span class="n">ie</span><span class="o">-</span><span class="n">userdata</span> <span class="o">...................</span> <span class="k">for</span> <span class="n">msft</span> <span class="n">js</span> <span class="n">engines</span>
<span class="n">memory</span> <span class="o">........................</span> <span class="n">in</span> <span class="n">memory</span> <span class="n">reference</span> <span class="n">implemenation</span>
<span class="n">webkit</span><span class="o">-</span><span class="n">sqlite</span> <span class="o">.................</span> <span class="n">great</span> <span class="k">for</span> <span class="n">webkits</span>
<span class="n">window</span><span class="o">-</span><span class="n">name</span> <span class="o">...................</span> <span class="n">default</span> <span class="n">fallback</span><span class="p">;</span> <span class="n">oldest</span> <span class="n">hack</span> <span class="n">in</span> <span class="n">the</span> <span class="n">book</span>
<span class="n">indexed</span><span class="o">-</span><span class="n">db</span> <span class="o">....................</span> <span class="n">omg</span> <span class="n">paul</span> <span class="n">irish</span> <span class="n">wrote</span> <span class="n">this</span><span class="o">!</span>
</pre></div>


<p>If you require an adapter thats not listed here it is trivial to implement your own. Adapters have the following interface:</p>
<div class="codehilite"><pre><span class="sr">//</span> <span class="n">adapter</span> <span class="n">name</span> <span class="n">as</span> <span class="n">a</span> <span class="n">string</span>
<span class="n">adapter</span>

<span class="sr">//</span> <span class="n">boolean</span><span class="p">;</span> <span class="n">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">adapter</span> <span class="n">is</span> <span class="n">valid</span> <span class="k">for</span> <span class="n">the</span> <span class="n">current</span> <span class="n">environment</span>
<span class="n">valid</span>

<span class="sr">//</span> <span class="n">ctor</span> <span class="n">call</span> <span class="ow">and</span> <span class="n">callback</span><span class="o">.</span> <span class="s">&#39;name&#39;</span> <span class="n">is</span> <span class="n">the</span> <span class="n">most</span> <span class="n">common</span> <span class="n">option</span> <span class="p">(</span><span class="n">to</span> <span class="n">name</span> <span class="n">the</span> <span class="n">collection</span><span class="p">)</span>
<span class="n">init</span> <span class="p">([</span><span class="n">options</span><span class="p">],</span> <span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">returns</span> <span class="n">all</span> <span class="n">the</span> <span class="nb">keys</span> <span class="n">in</span> <span class="n">the</span> <span class="n">store</span>
<span class="nb">keys</span> <span class="p">(</span><span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">save</span> <span class="n">an</span> <span class="n">object</span>
<span class="n">save</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">batch</span> <span class="n">save</span> <span class="n">array</span> <span class="n">of</span> <span class="n">objs</span>
<span class="n">batch</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">retrieve</span> <span class="n">obj</span> <span class="p">(</span><span class="ow">or</span> <span class="n">array</span> <span class="n">of</span> <span class="n">objs</span><span class="p">)</span> <span class="ow">and</span> <span class="n">apply</span> <span class="n">callback</span> <span class="n">to</span> <span class="nb">each</span>
<span class="n">get</span> <span class="p">(</span><span class="n">key</span><span class="o">|</span><span class="n">array</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">check</span> <span class="k">if</span> <span class="n">an</span> <span class="n">obj</span> <span class="nb">exists</span> <span class="n">in</span> <span class="n">the</span> <span class="n">collection</span>
<span class="nb">exists</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">returns</span> <span class="n">all</span> <span class="n">the</span> <span class="n">objs</span> <span class="n">to</span> <span class="n">the</span> <span class="n">callback</span> <span class="n">as</span> <span class="n">an</span> <span class="n">array</span>
<span class="n">all</span> <span class="p">(</span><span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">remove</span> <span class="n">a</span> <span class="n">doc</span> <span class="ow">or</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">em</span>
<span class="n">remove</span> <span class="p">(</span><span class="n">key</span><span class="o">|</span><span class="n">array</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="sr">//</span> <span class="n">destroy</span> <span class="n">everything</span>
<span class="n">nuke</span> <span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</pre></div>


<p>The tests ensure adapters are consistent no matter what the underlying store is. If you are writing an adapter check out <code>./tests/lawnchair-spec.js</code>. The memory adaptor is probably the simplest implementation to learn from. Note, all Lawnchair methods accept a callback as a last parameter. This is deliberate, most modern clientside storages only have async style interfaces, for a good reason, your code won't block the main thread aiding in the perception of performance. That callback will be scoped to the lawnchair instance. Make use of <code>fn</code> and <code>lambda</code> methods to allow for terse callbacks. </p>	</div>
	<div class="clear">lawnchair image attributed to drawbuck</div>
</div>
<script type="text/javascript" src="/app.js"></script>
</body>
</html>
		